tinymce.PluginManager.add("top_widget",function(e){function t(){var e=false;if(window.XMLHttpRequest){e=new XMLHttpRequest}else if(window.ActiveXObject){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=false}}}return e}function n(){var e="",t=0,n=1;$.ajax({url:"/admin/casino/retrieve_data",type:"GET",async:false,dataType:"json",success:function(r){e+='<table class="table top_widget">';e+="<thead>";e+="<tr>";e+='<th class="widget_count hidden-xs">#</th>';e+='<th class="widget_title">Casino</th>';e+='<th class="widget_ratings hidden-xs">Rating</th>';e+='<th class="widget_bonus">Welkomst bonus</th>';e+='<th class="widget_download hidden-xs">Download/review</th>';e+="</tr>";e+="</thead>";e+="<tbody>";$.each(r,function(){if(r[t]["widget_status"]==1){e+="<tr>";e+='<td class="widget_count hidden-xs">'+n+"</td>";e+='<td class="widget_title">';e+="<span>";e+='<img src="../../../images/'+r[t]["widget_image_upload"]+'" title="'+r[t]["widget_title"]+'" alt="'+r[t]["widget_title"]+'"/>';e+="</span>";e+=r[t]["widget_title"];e+="</td>";e+='<td class="widget_ratings hidden-xs">ratings</td>';e+='<td class="widget_bonus">bonus</td>';e+='<td class="widget_download hidden-xs">casino'+r[t]["widget_id"]+"/"+r[t]["widget_slug"]+"</td>";e+="</tr>"}t++;n++});e+="</tbody>";e+="</table>"},error:function(e,t,n){}});return e}e.addMenuItem("top_widget",{text:"Add Widget",context:"tools",onclick:function(){tinymce.activeEditor.execCommand("mceInsertContent",true,n())}})})